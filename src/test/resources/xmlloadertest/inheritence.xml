<?xml version="1.0" encoding="UTF-8"?>
<ns1:pipeline  xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
   xmlns:ns1='hudsonci.jobcreator.v1'
   xsi:schemaLocation='hudsonci.jobcreator.v1 file:/home/henrik/source-code/jobcreator-tool/application/target/schemas/jobcreator-v1.xsd'>
  <name>example</name>
  <environments>
    <environment name="parent1" pattern="${pipeline}_${environment}_${job}">
      <include>
        <job>job1</job>
        <job>job3</job>
        <job>job6</job>
      </include>
      <propertyset>
        <property name="prop_1">value1</property>
        <property name="prop_2">value2</property>
        <property name="prop_3" propagation="downstream" merge="prefix">value3</property>
      </propertyset>
    </environment>
    <environment name="parent2" pattern="${pipeline}_${job}">
      <include>
        <job>job2</job>
        <job>job4</job>
        <job>job5</job>
      </include> 
      <exclude>
        <job>job6</job>
        <job>job5</job>
      </exclude>
      <propertyset>
        <property name="env2-dsds">dsdsad</property>
        <property name="prop_1" >valueA</property>
        <property name="prop_3" propagation="upstream" merge="append">valueB</property>
      </propertyset> 
    </environment>
    
    <environment name="p1-first">
      <parents>
        <parent>parent1</parent>
        <parent>parent2</parent>             
      </parents>
      <propertyset>
        <property name="prop_2" />
      </propertyset>       
    </environment>
    
    <environment name="p2-first">
      <parents>
        <parent>parent2</parent>
        <parent>parent1</parent>        
      </parents>
    </environment>
    
    <environment name="local-first" pattern="${pipeline}">
      <parents>
        <parent>parent2</parent>
        <parent>parent1</parent>        
      </parents>      
    </environment>     
  </environments>
  <jobs>
    <job name="job1" template="template1.ftl" />
    <job name="job2" template="template2.ftl" />
    <job name="job3">
      <parents>
        <parent>job1</parent>
        <parent>job2</parent>
      </parents>
    </job>
    <job name="job4">
      <parents>
        <parent>job2</parent>        
        <parent>job1</parent>    
      </parents>
    </job>
    <job name="job5" template="template1.ftl" />      
    <job name="job6" template="template1.ftl" />
  </jobs>
</ns1:pipeline>
